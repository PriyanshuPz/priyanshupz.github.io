---
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";
import BaseLayout from "../layouts/BaseLayout.astro";
import constants from "../constants";
import myImage from "../assets/me.jpg";
import ContactForm from "../components/ContactForm.astro";
import MarkdownRender from "../components/MarkdownRender.astro";
---

<BaseLayout title="Priyanshu Verma - Portfolio">
  <main class="min-h-screen">
    <!-- Hero Section -->
    <section
      class="relative h-screen flex items-center justify-center overflow-hidden"
    >
      <div
        class="absolute inset-0 bg-gradient-to-r from-blue-600/20 to-purple-600/20 dark:from-blue-900/30 dark:to-purple-900/30"
      >
      </div>
      <div
        class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center"
      >
        <Image
          src={myImage}
          alt={constants.name}
          class="w-32 h-32 rounded-full mx-auto mb-8 border-4 border-white dark:border-gray-800 shadow-lg"
        />
        <h1 class="text-5xl font-bold text-gray-900 dark:text-white mb-4">
          {constants.name}
        </h1>
        <MarkdownRender content={constants.summary} />
        <div class="flex justify-center space-x-4">
          <a
            href={constants.social.linkedin}
            target="_blank"
            class="px-6 py-3 flex items-center space-x-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
          >
            <Icon name="mdi:linkedin" />
            <span>Connect</span>
          </a>
          <a
            href="/blog"
            class="px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"
          >
            Read My Blog
          </a>
        </div>
      </div>
    </section>

    <!-- Skills Section -->
    <section id="skills" class="py-20 max-w-3xl mx-auto">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <h2
          class="text-3xl font-bold text-center text-gray-900 dark:text-white mb-12"
        >
          Skills & Technologies
        </h2>
        <div class="flex flex-wrap justify-center gap-4">
          {
            constants.skills.map((skill) => (
              <div class="cursor-copy px-4 py-2 text-sm font-medium text-gray-900 dark:text-white bg-gray-200 dark:bg-gray-700 rounded-full shadow-sm hover:shadow-md transition-shadow">
                {skill}
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Experience Section -->
    <section
      id="experience"
      class="py-20 bg-gray-50 dark:bg-gray-900 max-w-3xl mx-auto"
    >
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <h2
          class="text-3xl font-bold text-center text-gray-900 dark:text-white mb-12"
        >
          Work Experience
        </h2>
        <div class="max-w-3xl mx-auto space-y-8">
          {
            constants.work.map((job, index) => (
              <div class="relative pl-8 before:absolute before:left-0 before:top-0 before:bottom-0 before:w-px before:bg-blue-600 dark:before:bg-blue-400">
                <div class="absolute left-0 top-0 w-2 h-2 -translate-x-1/2 rounded-full bg-blue-600 dark:bg-blue-400" />
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm">
                  <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">
                    {job.title}
                  </h3>
                  <p class="text-blue-600 dark:text-blue-400 mb-2">
                    {job.company}
                  </p>
                  <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
                    {job.start} - {job.end}
                  </p>
                  <MarkdownRender content={job.description} />
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Projects Section -->
    <section
      id="projects"
      class="py-20 bg-white dark:bg-gray-800 max-w-3xl mx-auto"
    >
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <h2
          class="text-3xl font-bold text-center text-gray-900 dark:text-white mb-12"
        >
          Featured Projects
        </h2>
        <div class="grid md:grid-cols-2 gap-8">
          {
            constants.projects.map((project) => (
              <div class="group relative bg-gray-50 dark:bg-gray-700 rounded-lg overflow-hidden">
                <div class="aspect-w-16 aspect-h-9">
                  <Image
                    src={project.image}
                    alt={project.title}
                    class="object-cover group-hover:scale-105 transition-transform duration-300"
                  />
                </div>
                <div class="p-6">
                  <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">
                    {project.title}
                  </h3>
                  <p class="text-gray-700 dark:text-gray-300 mb-4">
                    {project.description.substring(0, 150)}...
                  </p>
                  <div class="flex flex-wrap gap-2 mb-4">
                    {project.technologies.map((tech) => (
                      <span class="px-3 py-1 text-sm bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-full">
                        {tech}
                      </span>
                    ))}
                  </div>
                  <div class="flex space-x-4">
                    {project.links.map((link) => (
                      <a
                        href={link.href}
                        class="flex items-center text-blue-600 dark:text-blue-400 hover:underline"
                      >
                        <span>{link.type}</span>
                        <Icon name={link.icon} class="w-4 h-4 ml-1" />
                      </a>
                    ))}
                  </div>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Education Section -->
    <section
      id="education"
      class="py-20 bg-gray-50 dark:bg-gray-900 max-w-3xl mx-auto"
    >
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <h2
          class="text-3xl font-bold text-center text-gray-900 dark:text-white mb-12"
        >
          Education
        </h2>
        <div class="max-w-3xl mx-auto space-y-8">
          {
            constants.education.map((edu) => (
              <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm">
                <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">
                  {edu.school}
                </h3>
                <p class="text-blue-600 dark:text-blue-400 mb-2">
                  {edu.degree}
                </p>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
                  {edu.start}-{edu.end}
                </p>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-20 bg-white dark:bg-gray-800">
      <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2
          class="text-3xl font-bold text-center text-gray-900 dark:text-white"
        >
          Get In Touch
        </h2>
        <p class="text-center text-gray-900 dark:text-white mb-12">
          Want to chat? Just shoot me a dm with <a
            href={constants.social.linkedin}
            target="_blank"
            class="text-blue-400 hover:underline hover:text-blue-300"
            >a direct question on linkedin</a
          ><br />
          and I'll respond whenever I can. I will ignore all soliciting. <br /> Or
          you can fill
        </p>
        <div class="max-w-xl mx-auto">
          <ContactForm />
        </div>
      </div>
    </section>

    <button
      id="themeToggle"
      class="fixed bottom-4 right-4 p-3 bg-gray-200 dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-full shadow-md transition-colors hover:bg-gray-300 dark:hover:bg-gray-700 focus:outline-none"
      aria-label="Toggle theme"
    >
      <!-- Light Theme Icon -->
      <Icon name="mdi:weather-sunny" class="transform dark:hidden w-6 h-6" />

      <!-- Dark Theme Icon -->
      <Icon name="mdi:weather-night" class="hidden dark:block w-6 h-6" />
    </button>
  </main>
</BaseLayout>

<style>
  .aspect-w-16 {
    position: relative;
    padding-bottom: 56.25%;
  }

  .aspect-w-16 img {
    position: absolute;
    height: 100%;
    width: 100%;
    left: 0;
    top: 0;
  }
</style>
